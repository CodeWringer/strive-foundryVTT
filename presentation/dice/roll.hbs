{{!-- Parameters:
resultsForDisplay: {Array<Object>} = {
  cssClass: {String}
  content: {String}
}
outcomeType: {String}
degree: {String | Number}
numberOfDice: {String | Number}
hits: {String | Number}
misses: {String | Number}
diceComposition: {String}
primaryTitle: {String | undefined}
primaryImage: {String | undefined}
secondaryTitle: {String | undefined}
secondaryImage: {String | undefined}
cssClass: {undefined | String}
showBackFire: {Boolean | String}
obstacle: {Number}
isObstacleRolled: {Boolean}
evaluatedObstacle: {EvaluatedRollFormula}
evaluatedObstacleForDisplay: {String}
showReminder: {Boolean}
--}}
<div class="dice-roll-chat-message-container auto-margin-v-sm{{#if cssClass}} {{cssClass}}{{/if}}">
  {{!-- Header --}}
  {{!-- Secondary Title --}}
  {{#if (or (neq secondaryTitle undefined) (neq secondaryImage undefined))}}
    <div class="flex flex-row">
      {{#if secondaryImage}}
      <div class="flex flex-center">
        <img class="inline-img header-image margin-r-sm" name="img" src="{{secondaryImage}}" height="20" width="20" />
      </div>
      {{/if}}
      {{#if secondaryTitle}}
        <h3>
          {{localize secondaryTitle}}
        </h3>
      {{/if}}
    </div>
  {{/if}}
  {{!-- Primary Title --}}
  {{#if (or (neq primaryTitle undefined) (neq primaryImage undefined))}}
    <div class="flex flex-row">
      {{#if primaryImage}}
      <div class="flex flex-center">
        <img class="inline-img header-image margin-r-sm" name="img" src="{{primaryImage}}" height="35" width="35" />
      </div>
      {{/if}}
      {{#if primaryTitle}}
        <h2 class="flex-grow">
          {{localize primaryTitle}}
        </h2>
      {{/if}}
    </div>
  {{/if}}
  {{!-- Obstacle (if rolled for) --}}
  {{#if isObstacleRolled}}
  <div class="sheet-block">
    <p>
      {{evaluatedObstacle.formula}}
    </p>
    <div class="dice-rolls-container">
      {{{evaluatedObstacleForDisplay}}}
    </div>
    <p>
      {{localize "system.roll.obstacle.abbreviation"}}: {{evaluatedObstacle.hitTotal}} + 1 = {{obstacle}}
    </p>
  </div>
  {{/if}}
  {{!-- Dice --}}
  <div class="flex flex-row flex-middle flex-grow flex-wrap auto-margin-h-md">
    {{!-- Number of dice --}}
    <span class="strive-pill flex flex-row font-size-default" title="{{localize "system.roll.numberOfDice"}}">
      <div class="flex flex-center"><i class="fas fa-dice-three"></i></div>
      <div class="flex flex-center margin-l-md margin-r-md">{{> verticalLine}}</div>
      <div class="flex flex-center"><span class="dice-number">{{numberOfDice}}</span></div>
    </span>
    {{!-- Dice composition --}}
    {{#if diceComposition}}
    <div class="dice-composition">{{diceComposition}}</div>
    {{/if}}
  </div>
  {{!-- Individual dice results --}}
  <div class="dice-rolls-container">
    <ol class="dice-rolls">
      {{#each resultsForDisplay as | resultForDisplay |}}
        <li class="roll die d6 {{resultForDisplay.cssClass}}">{{resultForDisplay.content}}</li>
      {{/each}}
    </ol>
  </div>
  {{!-- Outcome --}}
  <div class="dice-result-container auto-margin-v-md">
    {{#if (eq outcomeType "SUCCESS")}}
      <div class="dice-result success">{{localize "system.roll.success.label"}}!</div>
    {{/if}}
    {{#if (eq outcomeType "PARTIAL")}}
      <div class="dice-result partial">{{localize "system.roll.partial.label"}}!</div>
    {{/if}}
    {{#if (eq outcomeType "FAILURE")}}
      <div class="dice-result failure">{{localize "system.roll.failure.label"}}!</div>
    {{/if}}
    {{#if showBackFire}}
      <div class="dice-result failure flex flex-row flex-middle">
        <i class="fas fa-exclamation-triangle"></i>
        <span class="margin-l-md">{{localize "system.roll.backFire.label"}}!</span>
      </div>
    {{/if}}
    <div class="flex flex-row flex-center flex-wrap auto-margin-h-lg auto-margin-h-sm font-size-default">
      {{!-- Hits --}}
      <span class="strive-pill flex flex-row font-size-default" title="{{localize "system.roll.hit.plural"}}">
        <div class="flex flex-center"><i class="ico dark ico-dice-check-solid" style="width: 1rem; height: 1rem;"></i></div>
        <div class="flex flex-center margin-l-md margin-r-md">{{> verticalLine}}</div>
        <div class="flex flex-center"><span class="dice-number">{{hits}}</span></div>
      </span>
      {{!-- Misses --}}
      <span class="strive-pill flex flex-row font-size-default" title="{{localize "system.roll.miss.plural"}}">
        <div class="flex flex-center"><i class="ico dark ico-dice-times-solid" style="width: 1rem; height: 1rem;"></i></div>
        <div class="flex flex-center margin-l-md margin-r-md">{{> verticalLine}}</div>
        <div class="flex flex-center"><span class="dice-number">{{misses}}</span></div>
      </span>
      {{!-- Missing --}}
      {{#if (neq missingDiceCount 0)}}
      <span class="strive-pill flex flex-row font-size-default" title="{{localize "system.roll.missing.plural"}}">
        <div class="flex flex-center"><i class="ico dark ico-dice-void-line" style="width: 1rem; height: 1rem;"></i></div>
        <div class="flex flex-center margin-l-md margin-r-md">{{> verticalLine}}</div>
        <div class="flex flex-center"><span class="dice-number">{{missingDiceCount}}</span></div>
      </span>
      {{/if}}
    </div>
  </div>
  {{!-- Reminder --}}
  {{#if showReminder}}
  <p class="border-solid-t-sm" style="text-align: center;">{{localize "system.roll.reminder"}}</p>
  {{/if}}
</div>
