{{!-- Parameters:
viewModel: {SkillListItemViewModel}
cssClass: {undefined | String}
--}}
<div class="custom-system-list-item{{#if cssClass}} {{cssClass}}{{/if}}">
  {{!-- Row --}}
  <div class="flex flex-row flex-middle list-item-header">
    {{!-- Roll --}}
    {{> buttonRoll viewModel=viewModel.vmBtnRoll cssClass="" }}
    {{!-- Send to chat --}}
    {{> buttonSendToChat viewModel=viewModel.vmBtnSendToChat cssClass="" }}
    {{!-- Name --}}
    <span class="width-min-xl">
      {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.singular"}}{{/label}}
    </span>
    <div class="list-item-header-img">
      {{> inputImage viewModel=viewModel.vmImg cssClass="custom-icon-sm" }}
    </div>
    <div class="flex-grow margin-r-md">
      {{> inputTextField viewModel=viewModel.vmTfName cssClass="list-item-header" }}
    </div>
    {{!-- Configure --}}
    {{> button viewModel=viewModel.vmBtnEdit square=true cssClass="" }}
    {{!-- Context Menu --}}
    {{> buttonContextMenu viewModel=viewModel.vmBtnContextMenu cssClass="" }}
    {{!-- Delete --}}
    {{> buttonDelete viewModel=viewModel.vmBtnDelete cssClass="" }}
  </div>
  {{!-- Row --}}
  <div class="flex flex-row margin-b-md">
    {{!-- Level --}}
    <div class="flex flex-row">
      <div class="width-min-lg{{#if (neq viewModel.showLevel true)}} hidden{{/if}}">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.level"}}{{/label}}
      </div>
      <div class="width-md{{#if (neq viewModel.showLevel true)}} hidden{{/if}}">
        {{> inputNumberSpinner viewModel=viewModel.vmNsLevel }}
      </div>
      {{!-- Level Modifier --}}
      <div class="margin-l-sm{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.levelModAbbreviation"}}{{/label}}
      </div>
      <div class="width-md{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
        {{> inputNumberSpinner viewModel=viewModel.vmNsLevelModifier }}
      </div>
      {{!-- Modified Level --}}
      <div class="width-md flex flex-middle{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
        <span class="pad-md font-bold">=</span>
        {{#> readOnlyValue cssClass="width-min-md font-size-lg flex flex-center"}}{{viewModel.modifiedLevel}}{{/readOnlyValue}}
      </div>
    </div>
    {{!-- Spacer --}}
    <div class="flex-grow"></div>
    {{!-- Advancement Requirements --}}
    <div class="flex flex-row{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
      <div class="width-min-xl">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.requirements.successAndFailure.abbreviation"}}{{/label}}
      </div>
      <div class="width-min-md">
        {{#> readOnlyValue}}{{viewModel.successes}} / {{viewModel.failures}}{{/readOnlyValue}}
      </div>
    </div>
    {{!-- Successes --}}
    <div class="flex flex-row{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
      <div class="width-min-l margin-l-sm">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.requirements.success.abbreviation"}}{{/label}}
      </div>
      <div class="width-md">
        {{> inputNumberSpinner viewModel=viewModel.vmNsSuccesses }}
      </div>
    </div>
    {{!-- Failures --}}
    <div class="flex flex-row{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
      <div class="width-min-l margin-l-sm">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.requirements.failure.abbreviation"}}{{/label}}
      </div>
      <div class="width-md">
        {{> inputNumberSpinner viewModel=viewModel.vmNsFailures }}
      </div>
    </div>
  </div>
  {{!-- Row --}}
  {{!-- Description --}}
  <div class="flex flex-column margin-b-md border-solid-t-sm border-solid-b-sm{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
    {{> inputRichText viewModel=viewModel.vmRtDescription }}
  </div>
  {{!-- Related Attribute --}}
  <div class="flex flex-row margin-b-sm{{#if (neq viewModel.showRelatedAttribute true)}} hidden{{/if}}">
    <span class="width-min-xl">
      {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.relatedAttribute"}}{{/label}}
    </span>
    <span>
      {{> inputDropDown viewModel=viewModel.vmDdRelatedAttribute }}
    </span>  
  </div>
  {{!-- Row --}}
  <div class="grid grid-2col grid-gap-md">
    {{!-- AP cost --}}
    <div class="fill flex flex-row{{#if viewModel.hideApCost}} hidden{{/if}}">
      <div class="flex-grow">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.ability.apCost"}}{{/label}}
      </div>
      <div class="width-md">
        {{> inputNumberSpinner viewModel=viewModel.vmNsApCost }}
      </div>
    </div>
    {{!-- Lots of optional content here --}}
    {{!-- Obstacle --}}
    <div class="fill flex flex-row{{#if viewModel.hideObstacle}} hidden{{/if}}">
      <div class="width-min-lg">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.roll.obstacle.abbreviation"}}{{/label}}
      </div>
      <div class="flex-grow">
        {{> inputTextField viewModel=viewModel.vmTfObstacle }}
      </div>
    </div>
    {{!-- Opposed By --}}
    <div class="fill flex flex-row{{#if viewModel.hideOpposedBy}} hidden{{/if}}">
      <div class="width-min-lg">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.roll.obstacle.opposedBy.label"}}{{/label}}
      </div>
      <div class="flex-grow">
        {{> inputTextField viewModel=viewModel.vmTfOpposedBy }}
      </div>
    </div>
    {{!-- Distance --}}
    <div class="fill flex flex-row{{#if viewModel.hideDistance}} hidden{{/if}}">
      <div class="width-min-lg">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.ability.distance.label"}}{{/label}}
      </div>
      <div class="flex-grow">
        {{> inputTextField viewModel=viewModel.vmTfDistance }}
      </div>
    </div>
    {{!-- Attack type --}}
    <div class="fill flex flex-row{{#if viewModel.hideAttackType}} hidden{{/if}}">
      <div class="width-min-lg">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.attackType.label"}}{{/label}}
      </div>
      <div class="flex-grow">
        {{> inputDropDown viewModel=viewModel.vmDdAttackType }}
      </div>
    </div>
    {{!-- Condition --}}
    <div class="fill flex flex-row{{#if viewModel.hideCondition}} hidden{{/if}}">
      <div class="width-min-lg">
        {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.ability.condition.label"}}{{/label}}
      </div>
      <div class="flex-grow">
        {{> inputTextarea viewModel=viewModel.vmTaCondition }}
      </div>
    </div>
  </div>
  {{!-- Damage --}}
  <div class="flex flex-row{{#if viewModel.hideDamage}} hidden{{/if}}">
    <div class="flex flex-center">
      <span class="button light square font-size-default flex flex-center" id="{{viewModel.id}}-damage-info">
        <i class="far fa-question-circle info-button"></i>
      </span>
    </div>
    {{> damageDefinitionList viewModel=viewModel.vmDamageDefinitionList}}
  </div>
  {{!-- Row --}}
  {{!-- Prerequisites --}}
  <div class="flex flex-column margin-b-sm{{#if (or (neq viewModel.showAdvancedData true) (neq viewModel.showPrerequisites true))}} hidden{{/if}}">
    {{#> header3 showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.prerequisite.plural"}}{{/header3}}
    <ul class="unstyled-list">
      {{#each viewModel.prerequisites as |prerequisite index|}}
      <li class="flex flex-row flex-middle">
        <span class="flex flex-row flex-grow">
          {{#> readOnlyValue cssClass="flex flex-center"}}{{prerequisite.name}}{{/readOnlyValue}}
        </span>
        <span style="width: 144px">
          {{#> label showFancyFont=../viewModel.showFancyFont}}{{localize "ambersteel.character.advancement.minimum"}}{{/label}}
        </span>
        <span class="width-md">
          {{#> readOnlyValue cssClass="font-size-md flex flex-center"}}{{prerequisite.minimumLevel}}{{/readOnlyValue}}
        </span>
      </li>
      {{/each}}
    </ul>
  </div>
  {{!-- Row --}}
  {{!-- Tags --}}
  <div class="flex flex-row margin-b-sm{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
    <span class="width-min-xl">
      {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.general.tags.label"}}{{/label}}
    </span>
    <span class="flex flex-grow">
      {{> inputTags viewModel=viewModel.vmTags }}
    </span>
  </div>
  {{!-- Row --}}
  <div class="flex flex-row{{#if (neq viewModel.showAdvancedData true)}} hidden{{/if}}">
    {{!-- Category --}}
    <div class="width-min-xl">
      {{#> label showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.general.category"}}{{/label}}
    </div>
    <div class="width-xxl">
      {{> inputTextField viewModel=viewModel.vmTfCategory }}
    </div>
  </div>
  {{!-- Row --}}
  {{!-- Skill Abilites --}}
  {{#if viewModel.showSkillAbilities}}
  {{#> header3 showFancyFont=viewModel.showFancyFont}}{{localize "ambersteel.character.skill.ability.plural"}}{{/header3}}
  {{> "systems/ambersteel/presentation/sheet/item/skill-ability/skill-ability-table.hbs" viewModel=viewModel.vmSkillAbilityTable cssClass=(ifThenElse viewModel.isSkillAbilityListVisible "" "hidden") }}
  {{/if}}
</div>
